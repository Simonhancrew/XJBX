## GDB调试

GDB熟悉的话看源码的时候下断点调试会方便很多

GDB主要做四件事帮助捕获bug

+ 在程序启动之前指定一些可以影响程序行为的变量或条件
+ 在某个指定的地方或条件下暂停程序
+ 在程序停止时检查已经发生了什么
+ 在程序执行过程中修改程序中的变量或条件，这样就可以体验修复一个 bug 的成果，并继续了解其他 bug

### 调试原理

一般要调试某个程序，为了能清晰地看到调试的每一行代码、调用的堆栈信息、变 量名和函数名等信息，需要调试程序含有调试符号信息。使用 gcc 编译程序时，如果加 上 -g 选项即可在编译后的程序中保留调试符号信息。

在实际生成调试程序时，一般不仅要加上 -g 选项，也建议关闭编译器的程序优化 选项。编译器的程序优化选项一般有五个级别，从 O0 ~ O4 

#### 启动gbd

主要有三种方式

1. gdb filename 直接调试程序
2. gdb attach pid 附加进程
3. gdb filename corename 调试core文件

对于知道进程id的,当用 gdb attach 上目标进程后，调试器会暂停下来，此时可以使用 continue 命令 让程序继续运行，或者加上相应的断点再继续运行程序。当调试完程序想结束此次调试时，而且不对当前进程 redis 有任何影响，也就是说 想让这个程序继续运行，可以在 GDB 的命令行界面输入 detach 命令让程序与 GDB 调试器分离，这样 redis 就可以继续运行了：

有时候，服务器程序运行一段时间后会突然崩溃，这并不是我们希望看到的，需要 解决这个问题。只要程序在崩溃的时候有 core 文件产生，就可以使用这个 core 文件 来定位崩溃的原因。当然，Linux 系统默认是不开启程序崩溃产生 core 文件这一机制 的，我们可以使用 ulimit -c 命令来查看系统是否开启了这一机制

#### 调试简介

